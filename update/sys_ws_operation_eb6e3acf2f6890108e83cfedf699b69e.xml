<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_operation">
    <sys_ws_operation action="INSERT_OR_UPDATE">
        <active>true</active>
        <consumes>application/json,application/xml,text/xml</consumes>
        <consumes_customized>false</consumes_customized>
        <default_operation_uri>/api/x_488231_demo/tdcsn/submit_request</default_operation_uri>
        <enforce_acl>beae0fdc2f3410108e83cfedf699b667</enforce_acl>
        <http_method>POST</http_method>
        <name>submit_request_post</name>
        <operation_script><![CDATA[function isUsingBasicAuth(headers) {
	
    var authHeader = headers.authorization;
    if (authHeader.indexOf("Basic")> -1)
    {
		return true;
    }
	return false;
	
}

(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {


    if (isUsingBasicAuth(request.headers)) {
		
		return { "response" : "Basic Authentication is not supported"};
    }
	
	var request_body = request.body.nextEntry();
	
	//var quantity = '' + request_body.sysparm_quantity;
	
	var apiObj = new global.RestapiInvokerGlobal();

	var quantity = '1';
	var requested_for = '' + apiObj.getUserSysID(request_body.requester);
	var noValidation =  (request_body.sysparm_no_validation == 'true');
	
	if (!/^\+?([0-9]*)$/.test(quantity))
		throw new sn_ws_err.BadRequestError("Invalid Quantity value");
	else
		request_body.sysparm_quantity = quantity;
	
	
	//var itemId = '' + request.pathParams.sys_id;
	var itemId = '' + apiObj.getCatalogItemSysId(request_body.service_name);
	request_body.sysparm_id = itemId;
	
    return {"message": "Hey "+request_body.requester+" your sys_id is "+requested_for, "will call service catalog": request_body.service_name };
	
})(request, response);]]></operation_script>
        <operation_uri>/api/x_488231_demo/v1/tdcsn/submit_request</operation_uri>
        <produces>application/json,application/xml,text/xml</produces>
        <produces_customized>false</produces_customized>
        <relative_path>/submit_request</relative_path>
        <request_example/>
        <requires_acl_authorization>true</requires_acl_authorization>
        <requires_authentication>true</requires_authentication>
        <requires_snc_internal_role>true</requires_snc_internal_role>
        <short_description/>
        <sys_class_name>sys_ws_operation</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2020-05-08 01:15:41</sys_created_on>
        <sys_id>eb6e3acf2f6890108e83cfedf699b69e</sys_id>
        <sys_mod_count>30</sys_mod_count>
        <sys_name>submit_request_post</sys_name>
        <sys_package display_value="Demo" source="x_488231_demo">edbe3a0e2fe010108e83cfedf699b6c3</sys_package>
        <sys_policy/>
        <sys_scope display_value="Demo">edbe3a0e2fe010108e83cfedf699b6c3</sys_scope>
        <sys_update_name>sys_ws_operation_eb6e3acf2f6890108e83cfedf699b69e</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2020-05-12 23:15:16</sys_updated_on>
        <web_service_definition display_value="tdcsn">2227fe8f2f6890108e83cfedf699b609</web_service_definition>
        <web_service_version display_value="v1">d677f2cf2f6890108e83cfedf699b653</web_service_version>
    </sys_ws_operation>
</record_update>
